<!DOCTYPE HTML><html lang="en-US">    <head>        <meta charset="UTF-8">        <title>Deferred AJAX Example</title>        <script type="text/javascript">            log = console.log;            dir = console.dir;        </script>        <script type="text/javascript" src="http://libraries/jquery-1.5.1.js"></script>        <script type="text/javascript">            //returns jqXHR object									console.group('Deferred object');            dir($.Deferred());            console.groupEnd();						console.group('promise object');            dir($.Deferred().promise());            console.groupEnd();                        function doAjax(){                var jqXHR = $.get('foo.html');				                console.group('jqXHR object');                console.dir(jqXHR);                console.groupEnd();                                jqXHR.then(function(){                    log('then');                });                jqXHR.done(function(){                    log('done');                });				jqXHR.success(function(){                    log('success');                });				//the complete callback is invoked regardless of wether the ajax request was a success or failure                jqXHR.complete(function(){                    log('complete');                });				jqXHR.fail(function(){                    log('fail');                });                jqXHR.error(function(){                    log('error');                });				                 return jqXHR;            }                        //returns jqXHR object            function doMoreAjax(){                return $.get('delay.php');//2 second delay set in php file            }                                                //$.when accepts deferred objects            //promise object provides a subset of the methods of the Deferred object (then, done, fail, isResolved, and isRejected)             //to prevent users from changing the state of the Deferred.            var promise = $.when(doAjax(), doMoreAjax()).then(function(){                log(1, 'I fire once BOTH ajax requests have successfully completed!');            }).then(function(){                log(2, 'I fire once BOTH ajax requests have successfully completed!');            }).fail(function(){                log('I fire if one or more requests failed.');            }).done(function(){                log(3, 'I fire once BOTH ajax requests have successfully completed!');            });                        setTimeout(function(){                promise.then(function(){                    log(4, 'I fire once BOTH ajax requests have successfully completed!');                })            }, 1000);                    </script>    </head>    <body></body></html>