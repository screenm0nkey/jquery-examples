<!DOCTYPE HTML><html lang="en-US">    <head>        <meta charset="UTF-8">        <title>Differnt ways of passing objects to $.with</title>        <style type="text/css">           ol{font:italic 1em Georgia, Times, serif;color:#999;list-style-type:decimal}		   ol li{margin-left:20px}li div{color:#444}		   li.end{padding-top:10px;color:green;list-style-type:none;margin:0}        </style>        <script type="text/javascript">            log = console.log;            dir = console.dir;        </script>        <script type="text/javascript" src="http://libraries/jquery-1.5.1.js"></script>        <script type="text/javascript">            $(function(){                var container = $("<ol/>").appendTo(document.body);                                // creates a deferred object to be resolved after a                // period of time, and returns a promise                function createDeferred(){                    return $.Deferred(function(dfd){                        setTimeout(dfd.resolve, Math.floor(Math.random() * 3000));                    }).promise();                }                                // constructs the array of promises, and attach                // a done callback to each in the process                var promises = [];                $.each("one two three four five six seven".split(" "), function(_, str){                    promises.push(createDeferred().done(function(){                        container.append('<li><div>' + str + '</div></li>');                    }));                });                                //applies the array of promises to $.when                $.when.apply(null, promises).then(function(){                    container.append('<li class="end">all done!</li>');                });                            });        </script>    </head>    <body>            </body></html>