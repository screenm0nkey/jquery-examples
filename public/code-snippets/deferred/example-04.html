<!DOCTYPE HTML><html lang="en-US">    <head>        <meta charset="UTF-8">        <title>Differnt ways of passing objects to $.with</title>        <script type="text/javascript">            log = console.log;            dir = console.dir;        </script>        <script type="text/javascript" src="http://libraries/jquery-1.5.1.js"></script>        <script type="text/javascript">            $(function(){                function startTask(element){                    var ret, timestamp = $.data(element, 'timestamp');                    					log(ret);					                    if (timestamp) {                        ret = timestamp;                    }                    else {                        ret = $.get('timestamp.php').success(function(timestamp){                            $.data(element, 'timestamp', timestamp);                        });                    }										log(ret);					                                        ret.hasOwnProperty('promise') ? log(ret.__proto__) : log(false);                    return ret;                }				                                $('#launchApplication').bind('click', function(event){                    event.preventDefault();                    $.when(startTask(this)).done(function(timestamp){                        log('done');                        $('#status').html('<p>You first started this task on: ' + timestamp + '</p>');                    });                });            });        </script>    </head>    <body>        <div id="launchApplication" style="background:red;height:100px; width:100px; cursor:pointer;">Click</div>        <div id="status" style="background:#ccc;height:100px; width:100px; padding:10px;"></div>    </body></html>