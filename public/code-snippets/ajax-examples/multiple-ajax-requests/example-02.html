<!DOCTYPE html>
<html lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="robots" content="noindex" />
        <title>Throbber Test</title>
        <style>
            div.box {
                background-color: #E5EECC;
                border: 1px solid #D4D4D4;
                width: 200px;
                float: left;
            };
        </style>
        <script src="http://code.jquery.com/jquery.min.js" type="text/javascript"></script>
        <script type="text/javascript">
            
            function fillBox($link, $elm){
                $link.data('ajax-active', true);
                $elm.empty().prepend("<img id='throbber' src='facebook.gif' />");
                
                $.ajax({
                    url: 'test.php',
                    cache: false,
                    success: function(data){ //closure
                        $link.removeData('ajax-active');
                        $elm.html(data);
                    }
                });
            };
            
            $(document).ready(function(){
                $("body").bind('click', function(e){
                    var $link = $(e.target).closest('a');
                    if (!$link.data('ajax-active')) {
                        fillBox($link, $('div.' + $link.attr('class')));
                    }
                    else {
                        alert('Ajax Active on this element');
                    }
					return false;
                });
            });
        </script>
    </head>
    <body>
        <a href="#" class="b1">Box 1</a>|<a href="#" class="b2">Box 2</a>|<a href="#" class="b3">Box 3</a>
		<a href="#" class="b4">Box 4</a>|<a href="#" class="b5">Box 5</a>|<a href="#" class="b6">Box 6</a>
        <br/>
        <br/>
        <div class="box b1">
        	&nbsp;
        </div>
        <div class="box b2">
        	&nbsp;
        </div>
        <div class="box b3">
        	&nbsp;
        </div>
		<div class="box b4">
			&nbsp;
        </div>
        <div class="box b5">
        	&nbsp;
        </div>
        <div class="box b6">
        	&nbsp;
        </div>
    </body>
</html>
