<!DOCTYPE HTML><html lang="en-US">    <head>        <meta charset="UTF-8">        <title></title>        <link rel="stylesheet" href="nick.css">        <link type="text/css" href="http://libraries/ui-theme/base/jquery.ui.all.css" rel="stylesheet" />        <script type="text/javascript" src="http://libraries/firebug.js"></script>        <script type="text/javascript" src="http://libraries/jquery-1.4.2.js"></script>        <script type="text/javascript" src="http://libraries/jquery-ui-1.8.2.min.js"></script>        <script type="text/javascript" src="http://libraries/jsonp-malsup.js"></script>        <script type="text/javascript">			log = console.log;			 var nameCount = 1;						            //Contructor            var twitterSearch = function(elm, options){                var base = this; //new empty object                base.$elm = $(elm);                base.elm = elm;                base.$elm.data("twitter", base);                base.opts = $.extend(true, {}, $.fn.twitterSearch.defaults, options || {});                base.timeoutID;                                base.refresh = function(){                    $.getJSONP({                        url: base.opts.url + escape(base.opts.term) + '&rpp=' + base.opts.amount + '&callback=?',                        timeout: 30000,                        error: function(xhr, status, e){                            base.opts.$link.data('twitter').active = false;                            alert('ERROR! ' + e);                        },                        //on success is the same as the call callback function when using jQuery's $.getJSON                        success: function(json){                            var $ul = base.$elm.find('ul.content');                                                        $ul.fadeOut('fast').empty();                                                        base.opts.$link.data('twitter').$loadImage.remove();//remove load image                            base.opts.$link.data('twitter').active = true;                                                        $.each(json.results, function(i, result){                                var $twit = $('<li><a href="#" class="remove-item">Delete</a>' + $.fn.twitterSearch.linkFormatter(result.text) + '</li>');                                if (result.profile_image_url) {                                    var f = '<a href="http://twitter.com/' + result.from_user + '"><img src="' + result.profile_image_url + '" width="28px"></a>';                                    $twit.prepend(f);                                                                    }                                $ul.append($twit);                            });                                                        $ul.fadeIn('slow');                                                        //set the jQuery-UI events to the parent                            base.$elm.draggable({                                handle: 'p.drag'                            }).resizable({                                maxWidth: 500,                                maxHeight: 600,                                minWidth: 100                            });                                                        $('#twitter-container').append(base.$elm);                                                        base.$elm.height(function(index, oldHeight){                                var th = 0;                                base.$elm.find('li:gt(0):lt(4)').each(function(){                                    th += $(this).outerHeight();                                });                                                                return th + base.$elm.find('p.drag').outerHeight();                            });                                                        //remove timeout													                            if (typeof base.timeoutID == "number") {                                window.clearTimeout(base.timeoutID);                                delete base.timeoutID;                            }                                                        base.timeoutID = setTimeout(function(){                                base.animate($ul)                            }, 2000);                            log(1, base.opts.term, base.timeoutID);                        }                    });                };                                base.animate = function($ul){                    base.$elm.find('li:first').animate({                        opacity: 0                    }, 500, function(){                        var $this = $(this), h = $this.outerHeight();                        $this.animate({                            marginTop: -h                        }, 500, function(){                            $this.css({                                marginTop: 0,                                opacity: 1                            });                            $ul.append($this.show());                                                        log(2, base.opts.term, base.timeoutID);                                                        base.timeoutID = setTimeout(function(){                                if (base.animate) {                                    base.animate($ul);                                }                            }, base.opts.timeout);                                                    })                    })                };                                base.close = function(){                    base.opts.$link.removeData('twitter');//remove data object on link                    base.$elm.remove(); //remove element                    base.animate = undefined;                    if (typeof base.timeoutID == "number") {                        window.clearTimeout(base.timeoutID);                        delete base.timeoutID;                    }                                    };                                base['remove-item'] = function($elm){                    $elm.closest('li').remove();                };                                base.init = function(){                    //use event delegation to capture all click events, get the class and then                    //use the class name to call the function                    base.$elm.bind('click', function(event){                        var $elm = $(event.target).closest('a[class]');                        var func = $(this).data('twitter')[$elm.attr('class')];                                                if (func) {                            func($elm);                        }                    })                                        base.refresh();//start the whole process off                }()            }                        //PLUGIN             $.fn.twitterSearch = function(options){                return $(this).each(function(){                    (new twitterSearch(this, options));                });            };                        $.fn.twitterSearch.defaults = {                term: undefined,                $link: undefined,                url: 'http://search.twitter.com/search.json?q=',                amount: 10,                timeout: 1000            };                                    $.fn.twitterSearch.linkFormatter = function(text){                var t = text.replace(/(http:\/\/\S+)/g, '<a href="$1">$1</a>');                t = t.replace(/\@(\w+)/g, '<a href="http://twitter.com/$1">@$1</a>');                return t;            };                                                (function($){                $ = jQuery;                //DOM has loaded                $(function(){                    $('a.tweets').click(function(event){                        $(this).trigger('GET_TWEETS');                        return false;                    });                                        $('#twitter-container').bind('GET_TWEETS', function(event){                        var $this = $(event.target);                        var data = $this.data('twitter');                                                if (!data) {                            $this.data('twitter', {                                $link: $this,                                $tweetBox: null,                                $loadImage: null,                                active: false                            });                                                        data = $this.data('twitter');                                                        data.$loadImage = $('<img>').attr({                                src: 'images/loading.gif'                            }).addClass('load-image').css({                                top: $this.offset().top + 0,                                left: $this.offset().left + 52                            }).appendTo(this);                                                        /*                             * create a div now, which will contain tweets the reason this is done                             * here is so we can store a reference to it in the link so we                             * have a connection between the link and the div containing the tweets                             */                            data.$tweetBox = $('<div class="draggable twitter">').css({                                top: $this.offset().top + 0,                                left: $this.offset().left + 52                            }).append('<p class="drag"><a href="#" class="refresh">refresh</a><a href="#" class="close">close</a></p><ul class="content">');                                                                                    data.$tweetBox.twitterSearch({                                term: $this.text(),                                $link: $this,                                amount: 20                            });                        }                        else {                            data.$tweetBox.data('twitter').refresh();                        }                    });                });            })(jQuery)        </script>    </head>    <body>    	<h1>http://tympanus.net/Development/LatestTweetsTooltip/</h1>        <div id="twitter-container">            <a href="#" class="tweets"><img src="images/facebook.png" alt="">toy story</a><a href="#" class="tweets"><img src="images/rss.png" alt="">england</a>        </div>    </body></html>